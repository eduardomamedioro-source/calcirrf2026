<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Calculadora IR 2026 com Passo a Passo</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 500px; }
        h2 { color: #1a73e8; text-align: center; }
        .campo { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #1a73e8; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button:hover { background: #1557b0; }
        
        #detalhes { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none; border: 1px solid #e0e0e0; }
        .passo { margin-bottom: 12px; font-size: 0.95em; line-height: 1.4; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .passo:last-child { border-bottom: none; }
        .destaque { font-weight: bold; color: #d93025; }
        .verde { color: #1e8e3e; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>Simulador IR 2026</h2>
    
    <div class="campo">
        <label>Salário Bruto (R$):</label>
        <input type="number" id="rendimento" placeholder="Ex: 5500">
    </div>
    
    <div class="campo">
        <label>Dependentes:</label>
        <input type="number" id="dependentes" value="0">
    </div>
    
    <button onclick="calcularTudo()">Calcular e Ver Detalhes</button>

    <div id="detalhes">
        <h3 style="margin-top:0">Demonstrativo do Cálculo:</h3>
        <div id="listaPassos"></div>
    </div>
</div>

<script>
    function formatar(valor) {
        return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function calcularTudo() {
        const bruto = parseFloat(document.getElementById('rendimento').value);
        const dep = parseInt(document.getElementById('dependentes').value);
        const valorPorDep = 189.59;

        if (isNaN(bruto)) return alert("Digite o valor do salário.");

        // Passo 1: Dependentes
        const totalDeducaoDep = dep * valorPorDep;
        const baseCalculo = Math.max(0, bruto - totalDeducaoDep);

        // Passo 2: Tabela Progressiva
        let impostoBruto = 0;
        let aliqTexto = "";
        let parcelaDeducao = 0;

        if (baseCalculo <= 2428.80) { aliqTexto = "Isento"; }
        else if (baseCalculo <= 2826.65) { impostoBruto = (baseCalculo * 0.075) - 182.16; aliqTexto = "7,5%"; parcelaDeducao = 182.16; }
        else if (baseCalculo <= 3751.05) { impostoBruto = (baseCalculo * 0.15) - 394.16; aliqTexto = "15%"; parcelaDeducao = 394.16; }
        else if (baseCalculo <= 4664.68) { impostoBruto = (baseCalculo * 0.225) - 675.49; aliqTexto = "22,5%"; parcelaDeducao = 675.49; }
        else { impostoBruto = (baseCalculo * 0.275) - 908.73; aliqTexto = "27,5%"; parcelaDeducao = 908.73; }

        // Passo 3: Redutor 2026
        let redutor = 0;
        let explicacaoRedutor = "";
        if (bruto <= 5000) {
            redutor = 312.89;
            explicacaoRedutor = "Redutor integral para isenção de R$ 5 mil.";
        } else if (bruto <= 7350) {
            redutor = 978.62 - (0.133145 * bruto);
            explicacaoRedutor = "Redutor parcial (rampa de transição).";
        } else {
            explicacaoRedutor = "Sem direito ao redutor extra (salário acima de R$ 7.350).";
        }

        let impostoFinal = Math.max(0, impostoBruto - redutor);

        // Gerar HTML do Passo a Passo
        const lista = document.getElementById('listaPassos');
        lista.innerHTML = `
            <div class="passo"><strong>1. Base de Cálculo:</strong><br>
                ${formatar(bruto)} - ${formatar(totalDeducaoDep)} (${dep} dep.) = <span class="verde">${formatar(baseCalculo)}</span>
            </div>
            <div class="passo"><strong>2. Imposto pela Tabela (Alíquota ${aliqTexto}):</strong><br>
                (${formatar(baseCalculo)} x ${aliqTexto}) - ${formatar(parcelaDeducao)} = <strong>${formatar(impostoBruto)}</strong>
            </div>
            <div class="passo"><strong>3. Novo Redutor (Lei 15.270/2025):</strong><br>
                Desconto aplicado: <span class="verde">${formatar(redutor)}</span><br>
                <small>${explicacaoRedutor}</small>
            </div>
            <div class="passo" style="background: #e1f5fe; padding: 10px; border-radius: 4px;">
                <strong>TOTAL A PAGAR:</strong><br>
                ${formatar(impostoBruto)} - ${formatar(redutor)} = <span class="destaque">${formatar(impostoFinal)}</span>
            </div>
        `;

        document.getElementById('detalhes').style.display = 'block';
    }
</script>

</body>
</html>